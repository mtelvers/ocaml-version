<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Ocaml_version (ocaml-version.Ocaml_version)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../index.html">ocaml-version</a> &#x00BB; Ocaml_version</nav><h1>Module <code>Ocaml_version</code></h1><p>Manipulate, parse and generate OCaml version strings.</p><p>These are of the form <code>major.minor.patch+extra</code>, where the <code>patch</code> and <code>extra</code> fields are optional.</p><nav class="toc"><ul><li><a href="#parsers-and-serializers">Parsers and serializers</a></li><li><a href="#architecture-support">Architecture Support</a></li><li><a href="#accessors">Accessors</a></li><li><a href="#constants">Constants</a></li><li><a href="#feature-selection">Feature Selection</a></li></ul></nav></header><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>Type of an OCaml version string</p></dd></dl><dl><dt class="spec value" id="val-v"><a href="#val-v" class="anchor"></a><code><span class="keyword">val</span> v : <span>?&#8288;patch:int</span> <span>&#45;&gt;</span> <span>?&#8288;prerelease:string</span> <span>&#45;&gt;</span> <span>?&#8288;extra:string</span> <span>&#45;&gt;</span> int <span>&#45;&gt;</span> int <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>v ?patch ?prerelease ?extra major minor</code> will construct an OCaml version string with the appropriate parameters. The <code>patch</code>, <code>prerelease</code>, and <code>extra</code> indicators are optional, but it is conventional to include a <code>patch</code> value of 0 for most recent OCaml releases.</p></dd></dl><section><header><h3 id="parsers-and-serializers"><a href="#parsers-and-serializers" class="anchor"></a>Parsers and serializers</h3></header><dl><dt class="spec value" id="val-to_string"><a href="#val-to_string" class="anchor"></a><code><span class="keyword">val</span> to_string : <span>?&#8288;prerelease_sep:char</span> <span>&#45;&gt;</span> <span>?&#8288;sep:char</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>to_string ?sep t</code> will convert the version <code>t</code> into a human-readable representation. The <code>sep</code> will default to the normal representation of extra version strings:</p><ul><li><code>~</code> for prerelease version</li><li><code>+</code> otherwise This can be changed to another character by supplying <code>sep</code> and potentially <code>prerelease_sep</code>. If <code>sep</code> is defined but not <code>prerelease_sep</code>, the prerelease separator is represented by two <code>sep</code> characters. One such use case is to generate Docker container tags from OCaml version strings, where only dashes and alphanumeric characters are allowed.</li></ul></dd></dl><dl><dt class="spec value" id="val-of_string"><a href="#val-of_string" class="anchor"></a><code><span class="keyword">val</span> of_string : string <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-t">t</a>, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><p><code>of_string t</code> will parse the version string in <code>t</code>. The return value is compatible with the <code>Result</code> combinators defined in the <code>rresult</code> library.</p></dd></dl><dl><dt class="spec value" id="val-of_string_exn"><a href="#val-of_string_exn" class="anchor"></a><code><span class="keyword">val</span> of_string_exn : string <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>of_string_exn t</code> behaves as <a href="index.html#val-of_string"><code>of_string</code></a> but raises <code>Invalid_argument</code> if the string cannot be parsed.</p></dd></dl><dl><dt class="spec value" id="val-equal"><a href="#val-equal" class="anchor"></a><code><span class="keyword">val</span> equal : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>equal a b</code> is the equality function for two OCaml version strings. Returns <code>true</code> if they are equal, <code>false</code> if they are not.</p></dd></dl><dl><dt class="spec value" id="val-compare"><a href="#val-compare" class="anchor"></a><code><span class="keyword">val</span> compare : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>compare a b</code> is the comparison function for two OCaml version strings. Returns <code>-1</code> if <code>a&lt;b</code>, <code>0</code> if they are equal and <code>1</code> if <code>a&gt;b</code>. Comparison is done using integer comparison for the major, minor and patch versions, and lexical comparison for any extra version strings present.</p></dd></dl><dl><dt class="spec value" id="val-pp"><a href="#val-pp" class="anchor"></a><code><span class="keyword">val</span> pp : Stdlib.Format.formatter <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> unit</code></dt><dd><p><code>pp fmt t</code> will output a human-readable version string of <code>t</code> to the <code>fmt</code> formatter.</p></dd></dl></section><section><header><h3 id="architecture-support"><a href="#architecture-support" class="anchor"></a>Architecture Support</h3><p>These definitions cover the CPU architectures that OCaml runs and is supported on.</p></header><dl><dt class="spec type" id="type-arch"><a href="#type-arch" class="anchor"></a><code><span class="keyword">type</span> arch</code> = <code>[ </code><table class="variant"><tr id="type-arch.I386" class="anchored"><td class="def constructor"><a href="#type-arch.I386" class="anchor"></a><code>| </code><code>`I386</code></td></tr><tr id="type-arch.X86_64" class="anchored"><td class="def constructor"><a href="#type-arch.X86_64" class="anchor"></a><code>| </code><code>`X86_64</code></td></tr><tr id="type-arch.Aarch64" class="anchored"><td class="def constructor"><a href="#type-arch.Aarch64" class="anchor"></a><code>| </code><code>`Aarch64</code></td></tr><tr id="type-arch.Aarch32" class="anchored"><td class="def constructor"><a href="#type-arch.Aarch32" class="anchor"></a><code>| </code><code>`Aarch32</code></td></tr><tr id="type-arch.Ppc64le" class="anchored"><td class="def constructor"><a href="#type-arch.Ppc64le" class="anchor"></a><code>| </code><code>`Ppc64le</code></td></tr><tr id="type-arch.S390x" class="anchored"><td class="def constructor"><a href="#type-arch.S390x" class="anchor"></a><code>| </code><code>`S390x</code></td></tr></table><code> ]</code></dt><dd><p>Type of CPU architectures. This is currently an incomplete list, and lists just those used by the opam test systems. Contributions welcome to complete it.</p></dd></dl><dl><dt class="spec value" id="val-arches"><a href="#val-arches" class="anchor"></a><code><span class="keyword">val</span> arches : <span><a href="index.html#type-arch">arch</a> list</span></code></dt><dd><p><code>arches</code> is an enumeration of all of the possible <a href="index.html#type-arch"><code>arch</code></a> values.</p></dd></dl><dl><dt class="spec value" id="val-string_of_arch"><a href="#val-string_of_arch" class="anchor"></a><code><span class="keyword">val</span> string_of_arch : <a href="index.html#type-arch">arch</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>string_of_arch arch</code> will convert <code>arch</code> into a human-readable CPU architecture string. The result will follow the <a href="https://golang.org/doc/install/source#environment">GOARCH</a> convention used by Golang.</p></dd></dl><dl><dt class="spec value" id="val-arch_of_string"><a href="#val-arch_of_string" class="anchor"></a><code><span class="keyword">val</span> arch_of_string : string <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-arch">arch</a>, <span>[&gt; <span>`Msg of string</span> ]</span>)</span> Stdlib.result</span></code></dt><dd><p><code>arch_of_string t</code> will parse the architecture string in <code>t</code>. The return value is compatible with the <code>Result</code> combinators defined in the <code>rresult</code> library. This function is liberal and will attempt to understand variants of the same architecture. For example, both <code>aarch64</code> and <code>arm64</code> are parsed into <code>`Aarch64</code>.</p></dd></dl><dl><dt class="spec value" id="val-arch_of_string_exn"><a href="#val-arch_of_string_exn" class="anchor"></a><code><span class="keyword">val</span> arch_of_string_exn : string <span>&#45;&gt;</span> <a href="index.html#type-arch">arch</a></code></dt><dd><p><code>arch_of_string_exn t</code> is the same as <a href="index.html#val-arch_of_string"><code>arch_of_string</code></a>, except that it raises <code>Invalid_argument</code> in case of error.</p></dd></dl><dl><dt class="spec value" id="val-arch_is_32bit"><a href="#val-arch_is_32bit" class="anchor"></a><code><span class="keyword">val</span> arch_is_32bit : <a href="index.html#type-arch">arch</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>arch_is_32bit t</code> will return <code>true</code> if the architecture has a 32-bit wordsize.</p></dd></dl><dl><dt class="spec value" id="val-to_opam_arch"><a href="#val-to_opam_arch" class="anchor"></a><code><span class="keyword">val</span> to_opam_arch : <a href="index.html#type-arch">arch</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>to_opam_arch arch</code> will return a string that is compatible with opam's <code>%{arch}%</code> variable.</p></dd></dl><dl><dt class="spec value" id="val-of_opam_arch"><a href="#val-of_opam_arch" class="anchor"></a><code><span class="keyword">val</span> of_opam_arch : string <span>&#45;&gt;</span> <span><a href="index.html#type-arch">arch</a> option</span></code></dt><dd><p><code>of_opam_arch s</code> will try to convert <code>s</code> that represents an opam <code>%{arch}%</code> variable to an <a href="index.html#type-arch"><code>arch</code></a> value.</p></dd></dl><dl><dt class="spec value" id="val-to_docker_arch"><a href="#val-to_docker_arch" class="anchor"></a><code><span class="keyword">val</span> to_docker_arch : <a href="index.html#type-arch">arch</a> <span>&#45;&gt;</span> string</code></dt><dd><p><code>to_docker_arch arch</code> will return a string that is compatible with a Docker multiarch property. This can be used in <code>--platform</code> flags to <code>docker run</code>, for example.</p></dd></dl><dl><dt class="spec value" id="val-of_docker_arch"><a href="#val-of_docker_arch" class="anchor"></a><code><span class="keyword">val</span> of_docker_arch : string <span>&#45;&gt;</span> <span><a href="index.html#type-arch">arch</a> option</span></code></dt><dd><p><code>of_docker_arch s</code> will try to convert <code>s</code> that represents a Docker multiarch variable to an <a href="index.html#type-arch"><code>arch</code></a> value.</p></dd></dl></section><section><header><h3 id="accessors"><a href="#accessors" class="anchor"></a>Accessors</h3></header><dl><dt class="spec value" id="val-major"><a href="#val-major" class="anchor"></a><code><span class="keyword">val</span> major : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>major t</code> will return the major version number of an OCaml release. For example, <code>of_string &quot;4.03.0&quot; |&gt; major</code> will return <code>4</code>.</p></dd></dl><dl><dt class="spec value" id="val-minor"><a href="#val-minor" class="anchor"></a><code><span class="keyword">val</span> minor : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> int</code></dt><dd><p><code>minor t</code> will return the minor version number of an OCaml release. For example, <code>of_string &quot;4.03.0&quot; |&gt; minor</code> will return <code>3</code>.</p></dd></dl><dl><dt class="spec value" id="val-patch"><a href="#val-patch" class="anchor"></a><code><span class="keyword">val</span> patch : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>int option</span></code></dt><dd><p><code>patch t</code> will return the patch version number of an OCaml release. For example, <code>of_string &quot;4.03.0&quot; |&gt; minor</code> will return <code>Some 0</code>.</p></dd></dl><dl><dt class="spec value" id="val-prerelease"><a href="#val-prerelease" class="anchor"></a><code><span class="keyword">val</span> prerelease : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>string option</span></code></dt><dd><p><code>prerelease t</code> will return the prerelease extra string of an OCaml prerelease. For example, <code>of_string &quot;4.12.0~beta+flambda&quot; |&gt; prerelease</code> will return <code>Some &quot;beta&quot;</code>.</p></dd></dl><dl><dt class="spec value" id="val-extra"><a href="#val-extra" class="anchor"></a><code><span class="keyword">val</span> extra : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>string option</span></code></dt><dd><p><code>extra t</code> will return the additional information string of an OCaml release. For example, <code>of_string &quot;4.03.0+flambda&quot; |&gt; extra</code> will return <code>Some &quot;flambda&quot;</code>.</p></dd></dl><dl><dt class="spec value" id="val-with_variant"><a href="#val-with_variant" class="anchor"></a><code><span class="keyword">val</span> with_variant : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>string option</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>with_variant t extra</code> will return a fresh value with the extra version information in <code>t</code> to <code>extra</code>, and remove it if <code>None</code> is supplied.</p></dd></dl><dl><dt class="spec value" id="val-without_variant"><a href="#val-without_variant" class="anchor"></a><code><span class="keyword">val</span> without_variant : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>without_variant t</code> is <a href="index.html#val-with_variant"><code>with_variant</code></a> <code>t None</code>. It removes any extra version information from the version string <code>t</code>.</p></dd></dl><dl><dt class="spec value" id="val-with_patch"><a href="#val-with_patch" class="anchor"></a><code><span class="keyword">val</span> with_patch : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>int option</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>with_patch t patch</code> will return a fresh value with the patch number in <code>t</code> to <code>patch</code>, and remove it if <code>None</code> is supplied.</p></dd></dl><dl><dt class="spec value" id="val-without_patch"><a href="#val-without_patch" class="anchor"></a><code><span class="keyword">val</span> without_patch : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>without_patch t</code> is as <a href="index.html#val-with_patch"><code>with_patch</code></a> <code>t None</code>. It removes the least significant number from the version string. This is useful for the Docker OCaml containers, which are all named without a patch number and compiled using the latest patch release (e.g. <code>4.06</code> instead of <code>4.06.1</code>).</p></dd></dl><dl><dt class="spec value" id="val-with_just_major_and_minor"><a href="#val-with_just_major_and_minor" class="anchor"></a><code><span class="keyword">val</span> with_just_major_and_minor : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dd><p><code>with_just_major_and_minor t</code> strips out any patch and extra version information to return the X.Y form of the OCaml release. For example, <code>4.08.0+trunk+flambda</code> will return the version representing <code>4.08</code>.</p></dd></dl></section><section><header><h3 id="constants"><a href="#constants" class="anchor"></a>Constants</h3></header><dl><dt class="spec value" id="val-sys_version"><a href="#val-sys_version" class="anchor"></a><code><span class="keyword">val</span> sys_version : <a href="index.html#type-t">t</a></code></dt><dd><p><code>sys_version</code> is the version of OCaml that this library is currently compiled with, which will be the same as <span class="xref-unresolved" title="unresolved reference to &quot;Sys.ocaml_version&quot;"><code>Sys</code>.ocaml_version</span>.</p></dd></dl><dl><dt class="spec module" id="module-Releases"><a href="#module-Releases" class="anchor"></a><code><span class="keyword">module</span> <a href="Releases/index.html">Releases</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Values representing official releases of OCaml.</p></dd></dl><dl><dt class="spec module" id="module-Sources"><a href="#module-Sources" class="anchor"></a><code><span class="keyword">module</span> <a href="Sources/index.html">Sources</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Values relating to the source code and version control of OCaml</p></dd></dl></section><section><header><h3 id="feature-selection"><a href="#feature-selection" class="anchor"></a>Feature Selection</h3></header><dl><dt class="spec module" id="module-Since"><a href="#module-Since" class="anchor"></a><code><span class="keyword">module</span> <a href="Since/index.html">Since</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Determine which release a feature or architecture first appeared in.</p></dd></dl><dl><dt class="spec module" id="module-Has"><a href="#module-Has" class="anchor"></a><code><span class="keyword">module</span> <a href="Has/index.html">Has</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Test whether a release has a given feature.</p></dd></dl><dl><dt class="spec module" id="module-Configure_options"><a href="#module-Configure_options" class="anchor"></a><code><span class="keyword">module</span> <a href="Configure_options/index.html">Configure_options</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Configuration parameters that affect the behaviour of OCaml at compiler-build-time.</p></dd></dl><dl><dt class="spec value" id="val-compiler_variants"><a href="#val-compiler_variants" class="anchor"></a><code><span class="keyword">val</span> compiler_variants : <a href="index.html#type-arch">arch</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> list</span></code></dt><dd><p><code>compiler_variants v</code> returns a list of configuration options that are available and useful for version <code>v</code> of the compiler.</p></dd></dl><dl><dt class="spec value" id="val-trunk_variants"><a href="#val-trunk_variants" class="anchor"></a><code><span class="keyword">val</span> trunk_variants : <a href="index.html#type-arch">arch</a> <span>&#45;&gt;</span> <span><a href="index.html#type-t">t</a> list</span></code></dt><dd><p><code>trunk_variants v</code> returns a list of OCaml version configurations that should be working and tested on the trunk version of the compiler.</p></dd></dl><dl><dt class="spec module" id="module-Opam"><a href="#module-Opam" class="anchor"></a><code><span class="keyword">module</span> <a href="Opam/index.html">Opam</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p>Opam compiler switches. These are available from the public <a href="https://github.com/ocaml/opam-repository">opam-repository</a>.</p></dd></dl></section></div></body></html>